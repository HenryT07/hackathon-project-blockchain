<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Trivia Game</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚õìÔ∏è Solana Trivia Game</h1>
            <p class="subtitle">Mine hashes, compete on the leaderboard, and win SOL prizes!</p>
            <div class="header-actions">
                <button id="header-classroom-btn" class="btn btn-classroom-header">üè´ Classroom</button>
            </div>
            <div class="wallet-connect">
                <button id="connect-wallet-btn" class="btn btn-wallet">Connect Phantom</button>
                <button id="test-phantom-btn" class="btn btn-test" style="display: none;" title="Test Phantom availability">üîç Test</button>
                <div id="wallet-info" class="wallet-info" style="display: none;">
                    <span id="wallet-address"></span>
                    <button id="disconnect-wallet-btn" class="btn-disconnect" title="Disconnect wallet">√ó</button>
                </div>
                <div id="wallet-debug" class="wallet-debug" style="display: none;"></div>
            </div>
        </header>

        <!-- Prize Pool & Leaderboard Info -->
        <div class="blockchain-info">
            <div class="prize-pool-card">
                <h3>üí∞ Prize Pool</h3>
                <div class="prize-amount">
                    <span id="prize-pool">0.00</span> <span class="currency">SOL</span>
                </div>
                <p class="prize-description">Unsuccessful hashes contribute to the pool!</p>
            </div>
            <div class="leaderboard-card">
                <h3>üèÜ Leaderboard</h3>
                <button id="view-leaderboard-btn" class="btn btn-small">View Top Players</button>
            </div>
        </div>

        <!-- Classroom Screen -->
        <div id="classroom-screen" class="screen">
            <div class="classroom-content">
                <h2>üè´ Join or Create Classroom</h2>
                <div class="classroom-options">
                    <div class="classroom-option">
                        <h3>Create Classroom</h3>
                        <button id="create-classroom-btn" class="btn btn-primary">Create New Classroom</button>
                    </div>
                    <div class="classroom-divider">OR</div>
                    <div class="classroom-option">
                        <h3>Join Classroom</h3>
                        <input type="text" id="classroom-code-input" placeholder="Enter 6-digit code" maxlength="6" class="classroom-input">
                        <button id="join-classroom-btn" class="btn btn-secondary">Join</button>
                    </div>
                </div>
                <div id="classroom-info" class="classroom-info" style="display: none;">
                    <h3>Classroom: <span id="classroom-code-display"></span></h3>
                    <p>Share this code with others to join!</p>
                    <div class="server-config" id="server-config">
                        <label for="server-url-input">Server URL:</label>
                        <input type="text" id="server-url-input" class="server-url-input" placeholder="http://localhost:3000">
                        <button id="update-server-btn" class="btn btn-small">Update</button>
                        <p class="server-hint">üí° For others to join: Use your computer's IP address (e.g., http://192.168.1.100:3000)</p>
                    </div>
                    <div class="active-players">
                        <h4>Active Players: <span id="player-count">0</span></h4>
                        <div id="players-list" class="players-list"></div>
                    </div>
                    <button id="start-classroom-game-btn" class="btn btn-primary">Start Game</button>
                    <button id="leave-classroom-btn" class="btn btn-danger">Leave Classroom</button>
                </div>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <div class="start-content">
                <h2>Welcome to Blockchain Trivia!</h2>
                <div id="classroom-badge" class="classroom-badge" style="display: none;">
                    <span>Classroom: <span id="current-classroom-code"></span></span>
                    <span id="classroom-players-count"></span>
                </div>
                <p class="game-description">Answer questions correctly to generate hashes. Successful hashes earn you points for the leaderboard. Unsuccessful hashes contribute to the prize pool!</p>
                <div class="category-select">
                    <label for="category">Choose a Category:</label>
                    <select id="category">
                        <option value="all">All Categories</option>
                        <option value="blockchain">Blockchain</option>
                        <option value="programming">Programming</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                    </select>
                </div>
                <div class="difficulty-select">
                    <label>Difficulty:</label>
                    <div class="radio-group">
                        <input type="radio" id="easy" name="difficulty" value="easy" checked>
                        <label for="easy">Easy</label>
                        <input type="radio" id="medium" name="difficulty" value="medium">
                        <label for="medium">Medium</label>
                        <input type="radio" id="hard" name="difficulty" value="hard">
                        <label for="hard">Hard</label>
                    </div>
                </div>
                <div class="start-buttons">
                    <button id="start-btn" class="btn btn-primary">Start Game</button>
                    <button id="classroom-btn" class="btn btn-classroom">üè´ Join/Create Classroom</button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="score-board">
                    <div class="score-item">
                        <span class="label">Score:</span>
                        <span id="score">0</span>
                    </div>
                    <div class="score-item">
                        <span class="label">Question:</span>
                        <span id="question-number">1</span>/<span id="total-questions">10</span>
                    </div>
                    <div class="score-item">
                        <span class="label">Time:</span>
                        <span id="timer">30</span>s
                    </div>
                    <div class="score-item">
                        <span class="label">Hashes:</span>
                        <span id="hash-count">0</span>
                    </div>
                </div>
                <div class="hash-status" id="hash-status" style="display: none;">
                    <div class="hash-attempts">
                        <span class="label">Hash Attempts:</span>
                        <span id="hash-attempts">0</span>
                    </div>
                    <div class="hash-success">
                        <span class="label">Successful:</span>
                        <span id="hash-successful">0</span>
                    </div>
                </div>
            </div>

            <div class="question-container">
                <div class="category-badge" id="question-category"></div>
                <h2 id="question-text"></h2>
                <div id="answers-container" class="answers-container"></div>
                <div id="feedback" class="feedback"></div>
            </div>

            <div class="game-controls">
                <button id="next-btn" class="btn btn-secondary" style="display: none;">Next Question</button>
                <button id="quit-btn" class="btn btn-danger">Quit Game</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-content">
                <h2>Game Over!</h2>
                <div class="final-score">
                    <div class="score-circle">
                        <span id="final-score">0</span>
                        <span class="score-label">Score</span>
                    </div>
                    <div class="score-details">
                        <p>Correct: <span id="correct-count">0</span></p>
                        <p>Incorrect: <span id="incorrect-count">0</span></p>
                        <p>Accuracy: <span id="accuracy">0</span>%</p>
                    </div>
                </div>
                <div class="hash-summary" id="hash-summary">
                    <h3>Hash Mining Results</h3>
                    <div class="hash-stats">
                        <p>Total Hash Attempts: <span id="final-hash-attempts">0</span></p>
                        <p>Successful Hashes: <span id="final-hash-successful">0</span></p>
                        <p>Contributed to Prize Pool: <span id="contributed-amount">0.00</span> SOL</p>
                    </div>
                </div>
                <div class="results-actions">
                    <button id="play-again-btn" class="btn btn-primary">Play Again</button>
                    <button id="home-btn" class="btn btn-secondary">Home</button>
                    <button id="leaderboard-btn" class="btn btn-secondary">View Leaderboard</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <div class="leaderboard-content">
                <h2>üèÜ Top Players</h2>
                <div id="leaderboard-list" class="leaderboard-list"></div>
                <div class="leaderboard-actions">
                    <button id="close-leaderboard-btn" class="btn btn-primary">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="blockchain.js"></script>
    <script src="classroom.js"></script>
    <script src="script.js"></script>
</body>
</html>

